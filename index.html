<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Latina Live - Tu Radio Latina en Vivo</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon"> </head>
<body>
    <aside class="player-container" id="player">
        <h1>Escúchanos en vivo</h1>
        <p>Si quieres estar al tanto de todo lo que tenemos para ti, ¡escúchanos!</p>
        <div class="audio-player">
            <audio id="audio" controls autoplay>
                Tu navegador no soporta el elemento de audio.
            </audio>
            <div class="track-info" id="track-info">Cargando información...</div>
            <div class="controls">
                <button onclick="lowerVolume()" aria-label="Bajar volumen">Bajar Volumen</button>
                <button onclick="raiseVolume()" aria-label="Subir volumen">Subir Volumen</button>
            </div>
            <div class="volume-display" id="volume-display">Volumen: 20%</div>
        </div>
    </aside>

    <header class="welcome-section">
        <h2>¡Bienvenido a Latina Live!</h2>
        <p>Tu espacio radial donde la diversidad musical latina cobra vida. Desde los ritmos más clásicos hasta las últimas tendencias, en Latina Live encontrarás una mezcla vibrante de géneros para todos los gustos.</p>
        <p>Prepárate para vibrar con la energía de nuestros DJs en vivo y sumergirte en un universo de sonidos que te harán sentir la pasión latina en cada nota.</p>
    </header>

    <nav class="site-nav">
        <ul>
            <li><a href="/">Inicio</a></li>
            <li><a href="/trends-suggestions/">Tendencias</a></li>
            <li><a href="/social/">Redes Sociales</a></li>
            <li><a href="/contact/">Contacto</a></li>
            </ul>
    </nav>

    <main>
        <section class="trends-section">
            <h3>Tendencias</h3>
            <p>Toda la música nueva, en un solo lugar. La dinámica se explica por sí sola.</p>
            <a href="/trends-suggestions/">En este enlace</a>
            <br>
            ¿Nos ayudas?
        </section>
    </main>

    <footer class="site-footer">
        <p>&copy; 2025 Latina Live</p>
    </footer>

    <script src="https://kit.fontawesome.com/your_fontawesome_kit.js" crossorigin="anonymous"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const audio = document.getElementById('audio');
            const trackInfo = document.getElementById('track-info');
            const volumeDisplay = document.getElementById('volume-display');

            if (audio) {
                const streamUrl = "https://ahmrs.net/listen/latina/live";
                audio.src = streamUrl;
                audio.volume = 0.2;

                function updateVolumeDisplay() {
                    if (volumeDisplay) {
                        volumeDisplay.textContent = `Volumen: ${Math.round(audio.volume * 100)}%`;
                    }
                }

                function lowerVolume() {
                    audio.volume = Math.max(0, audio.volume - 0.1);
                    updateVolumeDisplay();
                }

                function raiseVolume() {
                    audio.volume = Math.min(1, audio.volume + 0.1);
                    updateVolumeDisplay();
                }

                async function fetchMetadata() {
                    if (trackInfo) {
                        try {
                            const response = await fetch('https://ahmrs.net/api/nowplaying/1', {
                                headers: {
                                    'Content-Type': 'application/json; charset=utf-8'
                                }
                            });
                            const data = await response.json();

                            const songTitle = data.now_playing.song.title || "Sin información";
                            const songArtist = data.now_playing.song.artist || "Desconocido";

                            trackInfo.textContent = `Escuchando: ${songArtist} - ${songTitle}`;
                        } catch (error) {
                            trackInfo.textContent = "No se pudo obtener la información de la canción";
                            console.error("Error al obtener los metadatos:", error);
                        }
                    }
                }

                setInterval(fetchMetadata, 15000);
                fetchMetadata();
                updateVolumeDisplay();
            } else {
                console.error("Error: El elemento de audio con ID 'audio' no se encontró.");
            }
        });
    </script>
</body>
</html>